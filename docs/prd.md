<!--
    簡譜鋼琴應用程式 - 產品需求文件 (PRD)
    
    本文件詳細說明簡譜鋼琴應用程式的產品需求、功能規格、
    技術架構與開發規劃，為整個專案的核心指導文件。
    
    建立日期: 2025-08-31
    版本: v1.0
    適用平台: iOS (React Native)
-->

# 簡譜鋼琴應用程式 - 產品需求文件 (PRD)

## 📋 產品概覽

### 產品名稱
**Simple Piano** - 簡譜鋼琴

### 產品定位
一款專為音樂愛好者和初學者設計的移動端鋼琴應用程式，提供直觀的簡譜標記系統和專業的音頻體驗。

### 目標用戶
- **主要用戶**: 音樂初學者、業餘愛好者
- **次要用戶**: 專業音樂人、音樂教師
- **年齡層**: 6-60 歲
- **使用場景**: 學習練習、娛樂放鬆、創作靈感記錄

## 🎯 產品目標

### 商業目標
1. 打造用戶友善的音樂學習工具
2. 建立具備商業價值的移動音樂應用
3. 累積音樂教育領域的技術經驗

### 用戶價值
1. **學習簡化**: 透過簡譜標記降低學習門檻
2. **便攜性**: 隨時隨地進行音樂練習
3. **功能完整**: 彈奏、錄製、播放一體化體驗

## 🚀 核心功能需求

### 1. 鋼琴鍵盤介面

#### 基本規格
- **顯示方向**: 強制橫向顯示
- **音域範圍**: C3-C6 (37鍵，3個完整八度)
- **鍵盤佈局**: 標準鋼琴鍵排列 (21白鍵 + 16黑鍵)

#### 視覺設計
- **簡譜標記**: Do(1), Re(2), Mi(3), Fa(4), Sol(5), La(6), Si(7)
- **顏色編碼系統**:
  - 低音區 (C3-B3): 暖色調 (橘紅色系)
  - 中音區 (C4-B4): 中性色調 (黃綠色系) 
  - 高音區 (C5-C6): 冷色調 (藍綠色系)
- **按鍵狀態**: 正常、按下、長按三種視覺狀態

#### 交互體驗
- **多點觸控**: 支援同時按下多個琴鍵
- **觸覺反饋**: 按鍵按下時提供震動回饋
- **視覺反饋**: 按鍵變亮、縮放動畫效果

### 2. 音頻系統

#### 音質要求
- **採樣率**: 44.1kHz 標準音質
- **延遲控制**: < 50ms 低延遲響應
- **音色品質**: 接近真實鋼琴音色

#### 音頻處理
- **合成方式**: 使用 Web Audio API 實時合成
- **音域調音**: 標準 440Hz A4 調音
- **音量包絡**: ADSR (Attack-Decay-Sustain-Release) 包絡處理
- **音效增強**: 低通濾波器優化音色質感

### 3. 錄製與播放功能

#### 錄音功能
- **錄音格式**: 內部 MIDI 事件序列
- **錄音品質**: 保存完整的時序和力度資訊
- **錄音控制**: 開始/停止/暫停錄音
- **時間顯示**: 即時顯示錄音時長

#### 播放功能
- **播放控制**: 播放/暫停/停止
- **播放指示**: 視覺化顯示當前播放進度
- **速度控制**: 0.5x - 2.0x 播放速度調整

#### 檔案管理
- **本地儲存**: 使用 AsyncStorage 存儲錄音
- **檔案命名**: 自動以時間戳命名
- **檔案操作**: 重新命名、刪除、分享

### 4. 使用者介面設計

#### 主畫面佈局
- **頂部工具列**:
  - 左上: 設定按鈕 (齒輪圖示)
  - 中央: 應用標題 "Piano"
  - 右上: 選單按鈕 (漢堡選單)
- **中央區域**: 鋼琴鍵盤主體
- **底部控制列**: 錄音控制面板

#### 錄音控制面板
- **錄音按鈕**: 圓形紅色錄音按鈕
- **計時顯示**: MM:SS 格式時間顯示
- **狀態指示**: 錄音/播放/停止狀態顯示

#### 設定介面
- **音量控制**: 主音量滑桿
- **音色選擇**: 鋼琴、電子琴等音色選項
- **觸覺回饋**: 開關觸覺反饋功能
- **關於資訊**: 版本資訊與開發者資訊

## 🎨 設計規範

### 視覺風格
- **主題色彩**: 深色主題為主，提供護眼體驗
- **背景色彩**: 深灰色 (#1a1a1a) 到黑色漸層
- **強調色彩**: 依據音域的彩色編碼系統
- **字體設計**: iOS 系統字體，確保清晰可讀

### 動畫效果
- **按鍵動畫**: 0.1s 快速縮放 + 顏色變亮
- **頁面轉場**: 0.3s 滑動轉場動畫
- **載入動畫**: 旋轉載入指示器

## 📱 技術規格

### 開發環境
- **框架**: React Native (v0.79.6)
- **工具鏈**: Expo SDK 53
- **開發語言**: TypeScript
- **最低 iOS 版本**: iOS 13.0

### 核心技術棧
- **音頻處理**: react-native-audio-api
- **UI 動畫**: react-native-reanimated
- **向量圖形**: react-native-svg  
- **本地存儲**: @react-native-async-storage/async-storage
- **螢幕方向**: react-native-orientation-locker

### 效能需求
- **啟動時間**: < 3 秒
- **記憶體使用**: < 100MB
- **CPU 使用**: < 30% (播放時)
- **電池消耗**: 低耗能模式

## 🧪 測試策略

### 功能測試
1. 琴鍵觸控響應測試
2. 多點觸控同時播放測試
3. 錄音/播放功能完整性測試
4. 檔案儲存與載入測試

### 效能測試
1. 音頻延遲測試 (< 50ms)
2. 記憶體洩漏測試
3. 長時間使用穩定性測試
4. 不同設備相容性測試

### 用戶體驗測試
1. 首次使用者引導流程
2. 介面直觀性測試
3. 無障礙功能測試

## 🚢 發布計劃

### MVP 版本 (v1.0)
- ✅ 基本鋼琴鍵盤功能
- ✅ 簡譜標記顯示
- ✅ 基礎錄音播放功能
- ✅ 橫向介面優化

### 後續版本規劃

#### v1.1 增強版本
- 多音色支援 (電子琴、管風琴等)
- 節拍器功能
- 音量調節滑桿

#### v1.2 社交版本  
- 錄音分享功能
- 雲端同步儲存
- 社群音樂庫

#### v2.0 專業版本
- 樂譜顯示與匯入
- MIDI 檔案支援
- 學習模式與教程

## 💼 商業模式

### 免費版本
- 基礎鋼琴功能
- 3 種預設音色
- 本地錄音儲存

### 付費版本 (Premium)
- 解鎖全部音色 (15+ 種)
- 雲端同步功能
- 無廣告體驗
- 專業音質升級

### 內購項目
- 音色包 ($0.99-2.99)
- 高級功能包 ($4.99/月)
- 專業版年費 ($29.99/年)

## 📊 成功指標

### 產品指標
- **下載量**: 首月達到 1,000+ 下載
- **用戶留存**: 7 日留存率 > 40%
- **用戶評分**: App Store 評分 > 4.2 星
- **使用時長**: 平均單次使用 > 5 分鐘

### 技術指標
- **崩潰率**: < 0.1%
- **載入時間**: 冷啟動 < 3 秒
- **回應時間**: 觸控回應 < 50ms
- **記憶體使用**: 穩定運行 < 100MB

---

## 📝 文件版本記錄

| 版本 | 日期 | 修改內容 | 修改者 |
|------|------|----------|---------|
| v1.0 | 2025-08-31 | 初版 PRD 文件建立 | Claude Code |

---

*本文件將隨著專案開發進度持續更新和完善*